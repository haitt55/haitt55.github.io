<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="factory-method">
    <meta name="author" content="HaiTT">

    <title>Cài đặt host ảo</title>

    <!-- Github page CSS-->
    <link href="../../css/github-light.css" rel="stylesheet">
    <link href="../../css/stylesheet.css" rel="stylesheet">

    <!-- Sysntax CSS -->
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/pygments14.css" rel="stylesheet">

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/clean-blog.min.css" rel="stylesheet">

    <!-- My Style -->
    <link href="../../css/style.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Be successful!</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="../../index.html">Home</a>
                </li>
                <li>
                    <a href="../../about.html">About</a>
                </li>
                <li>
                    <a href="../../contact.html">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header" style="background-image: url('../../img/post-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>[Design Pattern] - Tìm hiểu Factory Method qua ví dụ cụ thể</h1>
                    <span class="meta">Posted by <a href="#">HaiTT</a> on Apr 10, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                <h3 class="section-heading">Giới thiệu</h3>

                <p>Factory pattern là một design pattern được sử dụng rất nhiều trong thực tế. Nó thuộc loại creatial pattern, và là một trong những pattern tốt nhất trong việc tạo một object.</p>

                <p>Trong Factory pattern, chúng ta tạo một object mà không để lộ logic tạo object với người dùng và tạo ra các đối tượng mới bằng cách sử dụng một interface chung.</p>

                <h3 class="section-heading">Mục đích</h3>

                <ul>
                    <li><p>Định nghĩa một interface cho việc tạo object, nhưng cho các lớp con quyết định class nào để cấp nhanh chóng.</p></li>
                    <li><p>Định nghĩa một constructor "ảo".</p></li>
                    <li><p>Toán tử new được coi là không tốt.</p></li>
                </ul>

                <h3 class="section-heading">Thực thi</h3>

                <p>Chúng ta sẽ tạo một interface <strong>Shape</strong> và các class cụ thể thực thi interface <strong>Shape</strong>.
                Một class <strong>ShapeFactory</strong> được định nghĩa ở bước tiếp thep.</p>

                <p>Ở đây, chúng ta sẽ sử dụng class <strong>ShapeFactory</strong> để lấy một đối tượng <strong>Shape</strong>.
                Từ các thông tin (<i>CIRCLE / RECTANGLE / SQUARE</i>) được truyền qua ShapeFactory, chúng ta sẽ có được đối tượng cần sử dụng.</p>

                <a href="#">
                    <img class="img-responsive" src="../../img/factory_pattern_diagram.png" alt="">
                </a>

                <h3 class="section-heading">Bước 1</h3>

                <p>Tạo interface Shape</p>

                <p><i>Shape.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">interface</span> <span class="nc">Shape</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">draw</span><span class="p">();</span>
<span class="p">}</span>
                    </pre>
                </div>

                <h3 class="section-heading">Bước 2</h3>

                <p>Tạo các class implements cùng một interface (Shape)</p>

                <p><i>Circle.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">class</span> <span class="nc">Circle</span> <span class="k">implements</span> <span class="nx">Shape</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">draw</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s">"Inside Circle::draw() method.</span><span class="p">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
                    </pre>
                </div>

                <p><i>Square.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">class</span> <span class="nc">Square</span> <span class="k">implements</span> <span class="nx">Shape</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">draw</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s">"Inside Square::draw() method.</span><span class="p">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
                    </pre>
                </div>

                <p><i>Rectangle.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">class</span> <span class="nc">Rectangle</span> <span class="k">implements</span> <span class="nx">Shape</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">draw</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s">"Inside Rectangle::draw() method.</span><span class="p">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
                    </pre>
                </div>

                <h3 class="section-heading">Bước 3</h3>

                <p>Tạo một Factory để sinh ra các đối tượng cụ thể từ thông tin truyền vào.</p>

                <p><i>ShapeFactory.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">class</span> <span class="nc">ShapeFactory</span>
<span class="p">{</span>
    <span class="k">function</span> <span class="nf">getShape</span><span class="p">(</span><span class="nv">$shapeType</span> <span class="s">= ''</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$shapeType</span><span class="p">) {</span>
            <span class="k">case</span> <span class="s">'CIRCLE'</span> <span class="p">:</span>
                <span class="k">return new</span> <span class="vc">Circle()</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s">'SQUARE'</span> <span class="p">:</span>
                <span class="k">return new</span> <span class="vc">Square()</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s">'RECTANGLE'</span> <span class="p">:</span>
                <span class="k">return new</span> <span class="vc">Rectangle()</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s">'Circle'</span> <span class="p">:</span>
                <span class="k">return null</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
                    </pre>
                </div>

                <h3 class="section-heading">Bước 4</h3>

                <p>Sử dụng một file test để lấy đối tượng cụ thể thông qua thông tin truyền qua.</p>

                <p><i>test.php</i></p>

                <div class="syntax">
                    <pre class="pretty-print lang-php">
<span class="k">require_once</span> <span class="s">'ShapeFactory.php'</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s">'Shape.php.php'</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s">'Square.php'</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s">'Circle.php'</span><span class="p">;</span>
<span class="k">require_once</span> <span class="s">'Rectangle.php'</span><span class="p">;</span>

<span class="nv">$shapeFactory</span> <span class="p">=</span> <span class="k">new</span> <span class="vc">ShapeFactory()</span><span class="p">;</span>

<span class="nv">$circle</span> = <span class="nv">$shapeFactory</span><span class="o">-></span><span class="na">getShape</span>(<span class="s">'CIRCLE'</span>);
<span class="nv">$circle</span><span class="o">-></span><span class="na">draw</span>();

<span class="nv">$square</span> = <span class="nv">$shapeFactory</span><span class="o">-></span><span class="na">getShape</span>(<span class="s">'SQUARE'</span>);
<span class="nv">$square</span><span class="o">-></span><span class="na">draw</span>();

<span class="nv">$rectangle</span> = <span class="nv">$shapeFactory</span><span class="o">-></span><span class="na">getShape</span>(<span class="s">'RECTANGLE'</span>);
<span class="nv">$rectangle</span><span class="o">-></span><span class="na">draw</span>();

                    </pre>
                </div>

                <h3 class="section-heading">Bước 5</h3>

                <p>Xác nhận kết quả.</p>

                <p>Chúng ta có thể chạy file test.php trực tiếp trên command line:</p>

                <code>php -f <i style="color: black">path</i>/test.php</code><br>

                <p>Kết quả:</p>

                <code>Inside Circle::draw() method.</code><br>
                <code>Inside Square::draw() method.</code><br>
                <code>Inside Rectangle::draw() method.</code>

                <h3 class="section-heading">Kết luận</h3>

                <p>Chúng ta thấy rằng một class Factory cũng giống như một nhà máy sản xuất đối tượng vậy.
                    Nói chung, <strong>factory method</strong> thường được áp dụng cho những phương thức mà nhiệm vụ chính của nó là tạo ra đối tượng</p>

                <p>By <a href="../../about.html">HaiTT</a></p>
            </div>
        </div>
    </div>
</article>

<hr>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="#">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright &copy; HaiTT 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="../../js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../../js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="../../js/clean-blog.min.js"></script>

</body>

</html>